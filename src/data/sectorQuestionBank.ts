// Sector Question Bank — macros, sectors, default tags, exploratory questions

export interface SectorQuestion {
  id: string;
  text: string;
  roi: string;
  key: string;
  maps_to?: string | null;
  adds_tags_if_true?: string[];
  type?: 'boolean' | 'select';
  options?: string[];
}

export interface SectorInfo {
  value: string;
  label: string;
}

export const MACRO_SEGMENTS: SectorInfo[] = [
  { value: 'servicos', label: 'Serviços' },
  { value: 'comercio', label: 'Comércio' },
  { value: 'industria', label: 'Indústria' },
];

export const MACRO_TO_SECTORS: Record<string, SectorInfo[]> = {
  servicos: [
    { value: 'servicos_profissionais', label: 'Serviços Profissionais' },
    { value: 'tecnologia_saas', label: 'Tecnologia / SaaS' },
    { value: 'logistica_transporte', label: 'Logística e Transporte' },
    { value: 'corretagem_seguros', label: 'Corretagem e Seguros' },
    { value: 'educacao', label: 'Educação' },
    { value: 'saude', label: 'Saúde' },
    { value: 'imobiliario', label: 'Imobiliário' },
  ],
  comercio: [
    { value: 'ecommerce', label: 'E-commerce' },
    { value: 'varejo_fisico', label: 'Varejo Físico' },
    { value: 'distribuicao_atacado', label: 'Distribuição / Atacado' },
    { value: 'alimentacao_bares_restaurantes', label: 'Alimentação / Bares / Restaurantes' },
  ],
  industria: [
    { value: 'construcao_incorporacao', label: 'Construção / Incorporação' },
    { value: 'agro', label: 'Agronegócio' },
    { value: 'industria_alimentos_bebidas', label: 'Indústria de Alimentos e Bebidas' },
    { value: 'industria_metal_mecanica', label: 'Indústria Metal-Mecânica' },
  ],
};

export const OPERATION_TAGS: SectorInfo[] = [
  { value: 'tem_icms', label: 'ICMS' },
  { value: 'tem_iss', label: 'ISS' },
  { value: 'tem_st_icms', label: 'ST' },
  { value: 'importa', label: 'Importo' },
  { value: 'exporta', label: 'Exporto' },
  { value: 'multi_uf', label: 'Multi-UF' },
  { value: 'alto_volume_nfe', label: 'Alto volume NF' },
  { value: 'grupo_economico', label: 'Grupo econômico' },
  { value: 'b2c_alto', label: 'B2C Alto' },
  { value: 'b2b_alto', label: 'B2B Alto' },
  { value: 'alto_volume_servicos', label: 'Alto volume serviços' },
];

export const SECTOR_DEFAULT_TAGS: Record<string, string[]> = {
  servicos_profissionais: ['tem_iss', 'b2b_alto', 'alto_volume_servicos'],
  tecnologia_saas: ['tem_iss', 'b2b_alto', 'alto_volume_servicos'],
  logistica_transporte: ['tem_iss', 'b2b_alto'],
  corretagem_seguros: ['tem_iss', 'alto_volume_servicos'],
  educacao: ['tem_iss', 'alto_volume_servicos'],
  saude: ['tem_iss', 'alto_volume_servicos'],
  imobiliario: ['tem_iss'],
  ecommerce: ['tem_icms', 'b2c_alto', 'alto_volume_nfe'],
  varejo_fisico: ['tem_icms', 'b2c_alto'],
  distribuicao_atacado: ['tem_icms', 'b2b_alto', 'alto_volume_nfe'],
  alimentacao_bares_restaurantes: ['b2c_alto'],
  construcao_incorporacao: ['alto_volume_servicos'],
  agro: ['tem_icms'],
  industria_alimentos_bebidas: ['tem_icms', 'alto_volume_nfe'],
  industria_metal_mecanica: ['tem_icms', 'b2b_alto', 'alto_volume_nfe'],
};

export const SECTOR_PROBABLE_TAGS: Record<string, string[]> = {
  ecommerce: ['tem_st_icms', 'multi_uf'],
  varejo_fisico: ['tem_st_icms'],
  distribuicao_atacado: ['tem_st_icms', 'multi_uf'],
  logistica_transporte: ['multi_uf'],
  alimentacao_bares_restaurantes: ['tem_icms', 'tem_iss'],
  construcao_incorporacao: ['b2b_alto', 'grupo_economico'],
  saude: ['b2c_alto'],
  tecnologia_saas: [],
  servicos_profissionais: [],
  corretagem_seguros: ['b2b_alto'],
  educacao: ['b2c_alto'],
  agro: ['exporta', 'multi_uf'],
  industria_alimentos_bebidas: ['b2b_alto', 'tem_st_icms'],
  industria_metal_mecanica: ['importa'],
  imobiliario: ['b2b_alto', 'grupo_economico'],
};

export const SECTOR_QUESTIONS: Record<string, SectorQuestion[]> = {
  ecommerce: [
    {
      id: 'eq1',
      text: 'Você vende em marketplace (Mercado Livre, Shopee, Amazon)?',
      type: 'boolean',
      roi: 'Destrava regras de cadeia fiscal e repasse — reduz risco e pode gerar créditos',
      key: 'eq1',
      maps_to: 'opera_marketplace',
      adds_tags_if_true: ['b2c_alto'],
    },
    {
      id: 'eq2',
      text: 'Você vende para vários estados (multi-UF)?',
      type: 'boolean',
      roi: 'Destrava oportunidades de ICMS por UF e benefícios regionais',
      key: 'eq2',
      maps_to: null,
      adds_tags_if_true: ['multi_uf'],
    },
    {
      id: 'eq3',
      text: 'Seus produtos têm ICMS por substituição tributária (ST)?',
      type: 'boolean',
      roi: 'Destrava exclusões e ressarcimentos de ICMS-ST — economia direta',
      key: 'eq3',
      maps_to: null,
      adds_tags_if_true: ['tem_st_icms'],
    },
    {
      id: 'eq4',
      text: 'Sua operação tem alto volume de devoluções ou trocas?',
      type: 'boolean',
      roi: 'Destrava ajustes de crédito e rotinas fiscais que viram economia real',
      key: 'eq4',
      maps_to: null,
      adds_tags_if_true: [],
    },
  ],
  varejo_fisico: [
    {
      id: 'vq1',
      text: 'Você também vende online além da loja física?',
      type: 'boolean',
      roi: 'Destrava regras de canal híbrido e oportunidades de estrutura fiscal',
      key: 'vq1',
      maps_to: 'opera_ecommerce',
      adds_tags_if_true: ['alto_volume_nfe'],
    },
    {
      id: 'vq2',
      text: 'Seu mix inclui produtos com substituição tributária (bebidas, cosméticos, autopeças)?',
      type: 'boolean',
      roi: 'Destrava exclusões e ajustes de ICMS-ST — recuperação direta',
      key: 'vq2',
      maps_to: null,
      adds_tags_if_true: ['tem_st_icms'],
    },
    {
      id: 'vq3',
      text: 'Você compra de muitos fornecedores com alto volume de notas fiscais?',
      type: 'boolean',
      roi: 'Destrava conciliação fiscal e créditos não aproveitados',
      key: 'vq3',
      maps_to: null,
      adds_tags_if_true: ['alto_volume_nfe'],
    },
    {
      id: 'vq4',
      text: 'Você tem mais de uma loja ou filial?',
      type: 'boolean',
      roi: 'Destrava oportunidades de estrutura e governança fiscal entre unidades',
      key: 'vq4',
      maps_to: null,
      adds_tags_if_true: ['grupo_economico'],
    },
  ],
  distribuicao_atacado: [
    {
      id: 'dq1',
      text: 'Você vende principalmente para lojistas ou revendedores (B2B)?',
      type: 'boolean',
      roi: 'Destrava crédito, repasse e precificação tributária na cadeia',
      key: 'dq1',
      maps_to: null,
      adds_tags_if_true: ['b2b_alto'],
    },
    {
      id: 'dq2',
      text: 'Seu mix tem muitos produtos com substituição tributária?',
      type: 'boolean',
      roi: 'Destrava ressarcimento e oportunidades ICMS-ST — impacto direto no caixa',
      key: 'dq2',
      maps_to: null,
      adds_tags_if_true: ['tem_st_icms'],
    },
    {
      id: 'dq3',
      text: 'Você opera em mais de um estado (compra ou vende fora do estado)?',
      type: 'boolean',
      roi: 'Destrava oportunidades de ICMS e benefícios regionais por UF',
      key: 'dq3',
      maps_to: null,
      adds_tags_if_true: ['multi_uf'],
    },
    {
      id: 'dq4',
      text: 'Você tem centro de distribuição separado da operação de vendas?',
      type: 'boolean',
      roi: 'Destrava estrutura logística e tributária com potencial de economia',
      key: 'dq4',
      maps_to: null,
      adds_tags_if_true: [],
    },
  ],
  logistica_transporte: [
    {
      id: 'lq1',
      text: 'Você tem frota própria de veículos?',
      type: 'boolean',
      roi: 'Destrava oportunidades de estrutura, custo e compliance fiscal',
      key: 'lq1',
      maps_to: null,
      adds_tags_if_true: [],
    },
    {
      id: 'lq2',
      text: 'Você faz mais armazenagem/fulfillment do que transporte puro?',
      type: 'boolean',
      roi: 'Destrava enquadramento ISS vs ICMS e otimização de alíquota',
      key: 'lq2',
      maps_to: null,
      adds_tags_if_true: ['alto_volume_servicos'],
    },
    {
      id: 'lq3',
      text: 'Você atende clientes em vários estados?',
      type: 'boolean',
      roi: 'Destrava oportunidades por estado e rotinas fiscais interestaduais',
      key: 'lq3',
      maps_to: null,
      adds_tags_if_true: ['multi_uf'],
    },
    {
      id: 'lq4',
      text: 'Você terceiriza boa parte das entregas para autônomos ou parceiros?',
      type: 'boolean',
      roi: 'Destrava oportunidades contratuais e tributárias na relação com parceiros',
      key: 'lq4',
      maps_to: null,
      adds_tags_if_true: [],
    },
  ],
  alimentacao_bares_restaurantes: [
    {
      id: 'aq1',
      text: 'Você vende mais no salão ou por delivery?',
      type: 'select',
      options: ['Principalmente salão', 'Principalmente delivery', 'Metade a metade'],
      roi: 'Destrava canal e rotinas fiscais — impacto direto na carga tributária',
      key: 'aq1',
      maps_to: null,
      adds_tags_if_true: [],
    },
    {
      id: 'aq2',
      text: 'Bebidas alcoólicas representam parte significativa do seu faturamento?',
      type: 'boolean',
      roi: 'Destrava substituição tributária e regras específicas do mix de produtos',
      key: 'aq2',
      maps_to: null,
      adds_tags_if_true: ['tem_st_icms'],
    },
    {
      id: 'aq3',
      text: 'Você tem mais de uma unidade ou franquia?',
      type: 'boolean',
      roi: 'Destrava estrutura e padronização fiscal entre unidades',
      key: 'aq3',
      maps_to: null,
      adds_tags_if_true: ['grupo_economico'],
    },
    {
      id: 'aq4',
      text: 'Você compra insumos em alto volume com muitas notas fiscais?',
      type: 'boolean',
      roi: 'Destrava conciliação e créditos operacionais não aproveitados',
      key: 'aq4',
      maps_to: null,
      adds_tags_if_true: ['alto_volume_nfe'],
    },
  ],
  construcao_incorporacao: [
    {
      id: 'cq1',
      text: 'Você atua como empreiteira (obra por contrato) ou incorporadora (venda de unidades)?',
      type: 'select',
      options: ['Empreiteira', 'Incorporadora', 'Ambos'],
      roi: 'Destrava enquadramento correto e reduz riscos fiscais significativos',
      key: 'cq1',
      maps_to: null,
      adds_tags_if_true: [],
    },
    {
      id: 'cq2',
      text: 'Você cria SPE (Sociedade de Propósito Específico) para cada obra?',
      type: 'boolean',
      roi: 'Destrava oportunidades estruturais e otimização por empreendimento',
      key: 'cq2',
      maps_to: null,
      adds_tags_if_true: ['grupo_economico'],
    },
    {
      id: 'cq3',
      text: 'Você tem muita subcontratação de mão de obra?',
      type: 'boolean',
      roi: 'Destrava oportunidades de retenções e organização da cadeia fiscal',
      key: 'cq3',
      maps_to: null,
      adds_tags_if_true: [],
    },
    {
      id: 'cq4',
      text: 'Você tem obras em mais de um município ou estado?',
      type: 'boolean',
      roi: 'Destrava ISS por localização e rotinas fiscais interestaduais',
      key: 'cq4',
      maps_to: null,
      adds_tags_if_true: ['multi_uf'],
    },
  ],
  saude: [
    {
      id: 'sq1',
      text: 'Seus serviços são classificados como de natureza hospitalar (internação, cirurgia, UTI)?',
      type: 'boolean',
      roi: 'Destrava oportunidades clássicas do setor com base legal sólida',
      key: 'sq1',
      maps_to: null,
      adds_tags_if_true: [],
    },
    {
      id: 'sq2',
      text: 'Você atende mais por convênio ou particular?',
      type: 'select',
      options: ['Principalmente convênio', 'Principalmente particular', 'Metade a metade'],
      roi: 'Destrava perfil de receita e estratégia tributária adequada',
      key: 'sq2',
      maps_to: null,
      adds_tags_if_true: [],
    },
    {
      id: 'sq3',
      text: 'Sua folha de pagamento é significativa em relação ao faturamento?',
      type: 'boolean',
      roi: 'Destrava estratégia por folha e melhor enquadramento tributário',
      key: 'sq3',
      maps_to: null,
      adds_tags_if_true: ['alto_volume_servicos'],
    },
    {
      id: 'sq4',
      text: 'Você tem médicos ou profissionais de saúde como sócios PJ?',
      type: 'boolean',
      roi: 'Destrava análise de estrutura societária com potencial de economia',
      key: 'sq4',
      maps_to: null,
      adds_tags_if_true: ['grupo_economico'],
    },
  ],
  tecnologia_saas: [
    {
      id: 'tq1',
      text: 'Seu modelo de receita é principalmente assinatura recorrente?',
      type: 'boolean',
      roi: 'Destrava enquadramento correto e previsibilidade tributária',
      key: 'tq1',
      maps_to: null,
      adds_tags_if_true: [],
    },
    {
      id: 'tq2',
      text: 'Você atende clientes em vários municípios ou estados?',
      type: 'boolean',
      roi: 'Destrava ISS por localização e rotinas fiscais interestaduais',
      key: 'tq2',
      maps_to: null,
      adds_tags_if_true: ['multi_uf'],
    },
    {
      id: 'tq3',
      text: 'Sua margem líquida é superior a 15%?',
      type: 'boolean',
      roi: 'Destrava revisão de regime — Lucro Presumido pode ser mais vantajoso',
      key: 'tq3',
      maps_to: 'margem_liquida_faixa',
      adds_tags_if_true: [],
    },
    {
      id: 'tq4',
      text: 'Você tem time CLT significativo (mais de 10 funcionários CLT)?',
      type: 'boolean',
      roi: 'Destrava decisões por folha e estrutura societária',
      key: 'tq4',
      maps_to: null,
      adds_tags_if_true: [],
    },
  ],
  servicos_profissionais: [
    {
      id: 'spq1',
      text: 'Sua folha de pagamento representa mais de 28% do faturamento?',
      type: 'boolean',
      roi: 'Destrava Fator R — pode reduzir alíquota efetiva no Simples Nacional',
      key: 'spq1',
      maps_to: 'folha_faixa',
      adds_tags_if_true: [],
    },
    {
      id: 'spq2',
      text: 'Sua margem líquida é superior a 15%?',
      type: 'boolean',
      roi: 'Destrava revisão de regime — Lucro Presumido frequentemente mais vantajoso',
      key: 'spq2',
      maps_to: 'margem_liquida_faixa',
      adds_tags_if_true: [],
    },
    {
      id: 'spq3',
      text: 'Você presta serviço principalmente para poucos clientes grandes (B2B)?',
      type: 'boolean',
      roi: 'Destrava estratégia de estrutura e contratos com impacto tributário',
      key: 'spq3',
      maps_to: null,
      adds_tags_if_true: ['b2b_alto'],
    },
    {
      id: 'spq4',
      text: 'Você tem outras empresas ou sociedades no grupo?',
      type: 'boolean',
      roi: 'Destrava oportunidades de estrutura societária e planejamento entre empresas',
      key: 'spq4',
      maps_to: null,
      adds_tags_if_true: ['grupo_economico'],
    },
  ],
  corretagem_seguros: [
    {
      id: 'csq1',
      text: 'Sua receita é majoritariamente de comissão sobre apólices?',
      type: 'boolean',
      roi: 'Destrava enquadramento correto da receita e alíquota aplicável',
      key: 'csq1',
      maps_to: null,
      adds_tags_if_true: [],
    },
    {
      id: 'csq2',
      text: 'Você trabalha principalmente com benefícios corporativos (B2B)?',
      type: 'boolean',
      roi: 'Destrava estratégia de canal e estrutura fiscal para clientes empresa',
      key: 'csq2',
      maps_to: null,
      adds_tags_if_true: ['b2b_alto'],
    },
    {
      id: 'csq3',
      text: 'Sua margem líquida é superior a 15%?',
      type: 'boolean',
      roi: 'Destrava revisão de regime — Lucro Presumido pode gerar economia expressiva',
      key: 'csq3',
      maps_to: 'margem_liquida_faixa',
      adds_tags_if_true: [],
    },
    {
      id: 'csq4',
      text: 'Você tem muitos parceiros ou corretores associados?',
      type: 'boolean',
      roi: 'Destrava estrutura de comissionamento e riscos operacionais',
      key: 'csq4',
      maps_to: null,
      adds_tags_if_true: ['grupo_economico'],
    },
  ],
  educacao: [
    {
      id: 'edq1',
      text: 'Você é instituição de ensino regulamentada (escola, faculdade) ou curso/treinamento?',
      type: 'select',
      options: ['Instituição de ensino', 'Curso ou treinamento', 'Plataforma EAD'],
      roi: 'Destrava enquadramento do setor e oportunidades específicas',
      key: 'edq1',
      maps_to: null,
      adds_tags_if_true: [],
    },
    {
      id: 'edq2',
      text: 'Você oferece EAD ou assinatura de conteúdo?',
      type: 'boolean',
      roi: 'Destrava regras de receita recorrente e enquadramento digital',
      key: 'edq2',
      maps_to: 'opera_ecommerce',
      adds_tags_if_true: [],
    },
    {
      id: 'edq3',
      text: 'Sua folha de pagamento é expressiva (professores CLT)?',
      type: 'boolean',
      roi: 'Destrava estratégia por folha e melhor enquadramento tributário',
      key: 'edq3',
      maps_to: null,
      adds_tags_if_true: [],
    },
    {
      id: 'edq4',
      text: 'Você tem unidades em mais de um município?',
      type: 'boolean',
      roi: 'Destrava ISS por localização e rotinas fiscais entre municípios',
      key: 'edq4',
      maps_to: null,
      adds_tags_if_true: ['multi_uf'],
    },
  ],
  agro: [
    {
      id: 'agq1',
      text: 'Você é produtor rural ou agroindústria (processa/beneficia)?',
      type: 'select',
      options: ['Produtor rural', 'Agroindústria', 'Cooperativa', 'Ambos'],
      roi: 'Destrava enquadramento e cadeia fiscal correta para o seu perfil',
      key: 'agq1',
      maps_to: null,
      adds_tags_if_true: [],
    },
    {
      id: 'agq2',
      text: 'Você exporta sua produção?',
      type: 'boolean',
      roi: 'Destrava créditos acumulados de ICMS e oportunidades de exportação',
      key: 'agq2',
      maps_to: 'tem_exportacao',
      adds_tags_if_true: ['exporta'],
    },
    {
      id: 'agq3',
      text: 'Você compra muitos insumos com alto volume de notas fiscais?',
      type: 'boolean',
      roi: 'Destrava conciliação fiscal e créditos sobre insumos agropecuários',
      key: 'agq3',
      maps_to: null,
      adds_tags_if_true: ['alto_volume_nfe'],
    },
    {
      id: 'agq4',
      text: 'Você opera em mais de um estado?',
      type: 'boolean',
      roi: 'Destrava oportunidades de ICMS e benefícios fiscais regionais',
      key: 'agq4',
      maps_to: null,
      adds_tags_if_true: ['multi_uf'],
    },
  ],
  industria_alimentos_bebidas: [
    {
      id: 'iabq1',
      text: 'Você vende principalmente para distribuidores/varejos (B2B) ou direto ao consumidor?',
      type: 'select',
      options: ['Principalmente B2B', 'Principalmente consumidor final', 'Ambos'],
      roi: 'Destrava crédito, repasse e precificação na cadeia tributária',
      key: 'iabq1',
      maps_to: null,
      adds_tags_if_true: ['b2b_alto'],
    },
    {
      id: 'iabq2',
      text: 'Seu mix inclui produtos com substituição tributária?',
      type: 'boolean',
      roi: 'Destrava oportunidades de ICMS-ST — impacto direto no custo',
      key: 'iabq2',
      maps_to: null,
      adds_tags_if_true: ['tem_st_icms'],
    },
    {
      id: 'iabq3',
      text: 'Você tem alto volume de compras de insumos?',
      type: 'boolean',
      roi: 'Destrava créditos sobre insumos e conciliação fiscal',
      key: 'iabq3',
      maps_to: null,
      adds_tags_if_true: ['alto_volume_nfe'],
    },
    {
      id: 'iabq4',
      text: 'Você distribui para outros estados?',
      type: 'boolean',
      roi: 'Destrava benefícios de ICMS por UF e rotinas interestaduais',
      key: 'iabq4',
      maps_to: null,
      adds_tags_if_true: ['multi_uf'],
    },
  ],
  industria_metal_mecanica: [
    {
      id: 'imq1',
      text: 'Você importa matéria-prima ou peças do exterior?',
      type: 'boolean',
      roi: 'Destrava oportunidades de cadeia de importação e redução de custos',
      key: 'imq1',
      maps_to: 'tem_importacao',
      adds_tags_if_true: ['importa'],
    },
    {
      id: 'imq2',
      text: 'Você vende B2B com alto volume de notas fiscais?',
      type: 'boolean',
      roi: 'Destrava crédito e repasse na cadeia e rotinas de conciliação',
      key: 'imq2',
      maps_to: null,
      adds_tags_if_true: ['alto_volume_nfe'],
    },
    {
      id: 'imq3',
      text: 'Sua margem líquida é baixa (abaixo de 10%)?',
      type: 'boolean',
      roi: 'Destrava revisão LP vs LR — muito comum neste setor gerar economia',
      key: 'imq3',
      maps_to: 'margem_liquida_faixa',
      adds_tags_if_true: [],
    },
    {
      id: 'imq4',
      text: 'Você faz industrialização por encomenda para outros?',
      type: 'boolean',
      roi: 'Destrava enquadramentos específicos e redução de riscos fiscais',
      key: 'imq4',
      maps_to: null,
      adds_tags_if_true: [],
    },
  ],
  imobiliario: [
    {
      id: 'imobq1',
      text: 'Sua receita principal é locação de imóveis ou intermediação/administração?',
      type: 'select',
      options: ['Locação', 'Intermediação/Administração', 'Incorporação', 'Misto'],
      roi: 'Destrava enquadramento correto da receita e alíquota aplicável',
      key: 'imobq1',
      maps_to: null,
      adds_tags_if_true: [],
    },
    {
      id: 'imobq2',
      text: 'Você tem holding patrimonial com imóveis?',
      type: 'boolean',
      roi: 'Destrava oportunidades estruturais de planejamento patrimonial',
      key: 'imobq2',
      maps_to: null,
      adds_tags_if_true: ['grupo_economico'],
    },
    {
      id: 'imobq3',
      text: 'Você tem muitos imóveis (acima de 5 unidades)?',
      type: 'boolean',
      roi: 'Destrava organização fiscal e estratégia de escala patrimonial',
      key: 'imobq3',
      maps_to: null,
      adds_tags_if_true: [],
    },
    {
      id: 'imobq4',
      text: 'Você opera em mais de um município?',
      type: 'boolean',
      roi: 'Destrava ISS por localização e rotinas fiscais entre municípios',
      key: 'imobq4',
      maps_to: null,
      adds_tags_if_true: ['multi_uf'],
    },
  ],
};

export const SECTOR_SYNONYMS: Record<string, string[]> = {
  ecommerce: ['e-commerce', 'loja online', 'loja virtual', 'shopify', 'vtex', 'nuvemshop', 'marketplace', 'mercado livre', 'shopee', 'amazon', 'vende pela internet'],
  varejo_fisico: ['loja', 'varejo', 'loja de rua', 'shopping', 'boutique', 'loja de roupas', 'calçados', 'ótica', 'farmácia', 'papelaria', 'pet shop', 'supermercado', 'pdv'],
  distribuicao_atacado: ['distribuidora', 'atacado', 'atacarejo', 'revenda', 'venda para lojistas', 'representação com estoque', 'centro de distribuição'],
  logistica_transporte: ['transportadora', 'logística', 'frete', 'last mile', 'entrega', 'motofrete', 'operador logístico', 'armazém', 'fulfillment', 'courier'],
  alimentacao_bares_restaurantes: ['restaurante', 'bar', 'lanchonete', 'pizzaria', 'hamburgueria', 'cafeteria', 'padaria', 'delivery', 'dark kitchen', 'buffet'],
  construcao_incorporacao: ['construtora', 'incorporadora', 'obra', 'empreiteira', 'engenharia', 'reformas', 'loteamento', 'spe', 'obra por contrato'],
  saude: ['clínica', 'hospital', 'laboratório', 'diagnóstico', 'odontologia', 'medicina', 'estética médica', 'home care', 'natureza hospitalar'],
  tecnologia_saas: ['saas', 'software', 'ti', 'tecnologia', 'app', 'plataforma', 'licenciamento', 'assinatura', 'cloud', 'dev house', 'software house', 'startup'],
  servicos_profissionais: ['consultoria', 'assessoria', 'agência', 'advocacia', 'contabilidade', 'arquitetura', 'engenharia', 'auditoria', 'serviço b2b', 'prestador pj'],
  corretagem_seguros: ['corretora', 'seguros', 'planos', 'benefícios', 'consórcio', 'intermediação', 'comissão'],
  educacao: ['escola', 'faculdade', 'curso', 'ensino', 'ead', 'treinamento', 'plataforma de cursos', 'instituição de ensino'],
  agro: ['agro', 'agronegócio', 'fazenda', 'produtor rural', 'cooperativa', 'cerealista', 'agroindústria', 'pecuária', 'frigorífico', 'safra'],
  industria_alimentos_bebidas: ['indústria de alimentos', 'bebidas', 'fábrica', 'refrigerante', 'cervejaria', 'laticínios', 'panificação industrial', 'beneficiamento'],
  industria_metal_mecanica: ['metalúrgica', 'usinagem', 'mecânica', 'autopeças', 'caldeiraria', 'serralheria', 'fabricação', 'cnc', 'linha de produção'],
  imobiliario: ['imobiliária', 'locação', 'administração de imóveis', 'holding patrimonial', 'aluguel', 'spe patrimonial', 'renda de aluguel'],
};

export interface UniversalTrigger {
  id: string;
  condition: string;
  opportunity: string;
  priority: 'first' | 'contextual';
  message: string;
}

export const UNIVERSAL_TRIGGERS: UniversalTrigger[] = [
  {
    id: 'regime_review',
    condition: "regime_atual === 'simples' && faturamento_12m >= 2000000",
    opportunity: 'Revisão de Regime Tributário',
    priority: 'first',
    message: 'Seu faturamento indica que vale simular outros regimes — pode haver economia expressiva',
  },
  {
    id: 'reforma_window',
    condition: 'true',
    opportunity: 'Janela da Reforma Tributária 2025-2026',
    priority: 'contextual',
    message: 'A Reforma Tributária cria janela de oportunidade até 2026 para vários benefícios',
  },
];

/**
 * Infer macro segment from a detailed sector value
 */
export function inferMacroFromSector(sector: string): string | null {
  for (const [macro, sectors] of Object.entries(MACRO_TO_SECTORS)) {
    if (sectors.some(s => s.value === sector)) return macro;
  }
  return null;
}
